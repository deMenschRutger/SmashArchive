services:
    command.work_queue.process:
        class: AppBundle\Command\WorkQueueProcessCommand
        arguments:
            - "@tactician.commandbus"
            - "@doctrine.orm.default_entity_manager"
            - "@leezy.pheanstalk"
        tags:
            - { name: console.command }

    command.tournament.import:
        class: AppBundle\Command\TournamentImportCommand
        arguments:
            - "@doctrine.orm.default_entity_manager"
            - "@core.service.smashgg"
            - "@core.service.challonge"
        tags:
            - { name: console.command }

    command.event.results.generate:
        class: AppBundle\Command\EventGenerateResultsCommand
        arguments:
            - "@tactician.commandbus"
            - "@doctrine.orm.default_entity_manager"
        tags:
            - { name: console.command }

    command.smashranking.import:
        class: AppBundle\Command\SmashRankingImportCommand
        arguments: ["@doctrine.orm.default_entity_manager"]
        tags:
            - { name: console.command }

    app.controller.default:
        class: AppBundle\Controller\DefaultController
        calls:
            - ['setContainer', ['@service_container']]
            - ['setCommandBus', ['@tactician.commandbus']]

    app.controller.player:
        class: AppBundle\Controller\PlayerController
        calls:
            - ['setContainer', ['@service_container']]
            - ['setCommandBus', ['@tactician.commandbus']]
            - ['setCache', ['@cache.provider.filesystem']]

    app.controller.tournament:
        class: AppBundle\Controller\TournamentController
        calls:
            - ['setContainer', ['@service_container']]
            - ['setCommandBus', ['@tactician.commandbus']]

    app.twig.extension.sort_players_sets:
        class: AppBundle\Twig\SortPlayerSetsExtension
        public: false
        tags:
            - { name: twig.extension }

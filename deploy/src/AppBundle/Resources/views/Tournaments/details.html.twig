{% extends 'AppBundle:Tournaments:base.html.twig' %}

{% block tournament %}

<h2>Details</h2>
<br>
<h4>Number of entrants</h4>
<p>{{ tournament.entrantCount }}</p>
<br>

{% if tournament.organizers|length > 0 %}

    <h4>Tournament organizers</h4>
    <ul>

        {% for to in tournament.organizers %}
            <li>
                <a href="{{ path('player_details', { 'slug': to.slug }) }}">{{ to.gamerTag }}</a>
            </li>
        {% endfor %}

    </ul>
    <br>

{% endif %}

{% if tournament.resultsPage %}

    <h4>
        <a href="{{ tournament.resultsPage }}">Results page</a>
    </h4>
    <br>

{% endif %}

{% if tournament.smashggUrl %}

    <h4>
        <a href="{{ tournament.smashggUrl }}">smash.gg url</a>
    </h4>
    <br>

{% endif %}

<h2>Results</h2>
<div class="row">

    {% for index, event in tournament.events %}

    <div class="col-sm-6">

        {% if results[event.id] is defined and results[event.id]|length > 0 %}

        <h3>{{ event.name }}</h3>
        <br>
        <table class="table">
            <tbody>

            {% for result in results[event.id]|slice(0, 8) %}

            <tr>
                <td>{{ result.rank }}</td>
                <td>{{ include('entrant.html.twig', { 'entrant': result.entrant }) }}</td>
            </tr>

            {% endfor %}

            </tbody>
        </table>
        <p class="text-right">
            <a href="{{ path('tournaments_results', { 'slug': tournament.slug }) }}">Full results</a>
        </p>

        {% else %}

            No results found.

        {% endif %}

    </div>

    {% endfor %}

</div>

{% endblock %}